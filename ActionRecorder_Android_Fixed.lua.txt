-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- âºï¸ ACTION RECORDER - DELTA ANDROID VERSION
-- Optimized for mobile touch screen recording & playback
-- Perfect for: Fishing, Mining, Farming, Auto-clicking
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

print("Loading Action Recorder (Delta Android)...")
wait(0.5)

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- SERVICES
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

local Players = game:GetService("Players")
local CoreGui = game:GetService("CoreGui")
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local VirtualUser = game:GetService("VirtualUser")
local HttpService = game:GetService("HttpService")
local player = Players.LocalPlayer
local camera = workspace.CurrentCamera
local character = player.Character or player.CharacterAdded:Wait()

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- MOBILE DETECTION & COMPATIBILITY
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

local isMobile = UserInputService.TouchEnabled and not UserInputService.KeyboardEnabled
local isTablet = UserInputService.TouchEnabled and UserInputService.KeyboardEnabled

print("Device Type:", isMobile and "Mobile" or (isTablet and "Tablet" or "PC"))
print("Executor: Delta (Android)")

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- RECORDER CORE (Mobile Optimized)
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

local Recorder = {
    IsRecording = false,
    IsPlaying = false,
    IsPaused = false,
    Actions = {},
    SavedRecordings = {},
    CurrentRecording = nil,
    StartTime = 0,
    PlaySpeed = 1,
    LoopMode = false,
    LoopCount = 0,
    MaxLoops = 0,
    
    -- Mobile specific
    LastTouchPosition = nil,
    TouchStartTime = 0,
    
    -- Connections
    Connections = {},
    
    -- Statistics
    Stats = {
        TotalRecordings = 0,
        TotalActions = 0,
        LastRecordingDuration = 0
    }
}

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- MOBILE TOUCH HELPER FUNCTIONS
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

local function GetTouchPosition(input)
    return input.Position
end

local function GetScreenPercentage(position)
    local screenSize = camera.ViewportSize
    return Vector2.new(
        position.X / screenSize.X,
        position.Y / screenSize.Y
    )
end

local function GetPositionFromPercentage(percentage)
    local screenSize = camera.ViewportSize
    return Vector2.new(
        percentage.X * screenSize.X,
        percentage.Y * screenSize.Y
    )
end

local function GetObjectAtPosition(position)
    local unitRay = camera:ViewportPointToRay(position.X, position.Y)
    local ray = Ray.new(unitRay.Origin, unitRay.Direction * 500)
    
    local params = RaycastParams.new()
    params.FilterDescendantsInstances = {character}
    params.FilterType = Enum.RaycastFilterType.Blacklist
    
    local result = workspace:Raycast(unitRay.Origin, unitRay.Direction * 500, params)
    
    if result then
        return result.Instance, result.Position
    end
    
    return nil, nil
end

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- RECORDING FUNCTIONS (Mobile)
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function Recorder:StartRecording()
    if self.IsRecording then
        print("âš ï¸ Already recording!")
        return
    end
    
    self.IsRecording = true
    self.Actions = {}
    self.StartTime = tick()
    
    print("â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•")
    print("âºï¸ RECORDING STARTED (Mobile Mode)")
    print("â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•")
    
    self:SetupMobileListeners()
end

function Recorder:StopRecording()
    if not self.IsRecording then
        print("âš ï¸ Not recording!")
        return nil
    end
    
    self.IsRecording = false
    self:DisconnectListeners()
    
    local duration = tick() - self.StartTime
    self.Stats.LastRecordingDuration = duration
    self.Stats.TotalActions = #self.Actions
    
    print("â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•")
    print("â¹ï¸ RECORDING STOPPED")
    print("â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•")
    print("Duration:", string.format("%.2fs", duration))
    print("Actions recorded:", #self.Actions)
    print("â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•")
    
    return self.Actions
end

function Recorder:RecordAction(actionType, data)
    if not self.IsRecording then return end
    
    local action = {
        Type = actionType,
        Time = tick() - self.StartTime,
        Data = data,
        Character = {
            Position = character:FindFirstChild("HumanoidRootPart") and character.HumanoidRootPart.Position or Vector3.new(0,0,0),
            CFrame = character:FindFirstChild("HumanoidRootPart") and character.HumanoidRootPart.CFrame or CFrame.new(0,0,0)
        }
    }
    
    table.insert(self.Actions, action)
    
    if UpdateActionCount then
        UpdateActionCount(#self.Actions)
    end
    
    print(string.format("ğŸ“ [%.2fs] %s", action.Time, actionType))
end

function Recorder:SetupMobileListeners()
    -- Touch/Tap Detection
    self.Connections.TouchTap = UserInputService.TouchTap:Connect(function(touchPositions, gameProcessed)
        if gameProcessed then return end
        
        for _, pos in ipairs(touchPositions) do
            local screenPercent = GetScreenPercentage(pos)
            local target, worldPos = GetObjectAtPosition(pos)
            
            self:RecordAction("TouchTap", {
                ScreenPosition = pos,
                ScreenPercent = screenPercent,
                WorldPosition = worldPos,
                Target = target,
                TargetName = target and target.Name or "nil",
                TargetPath = target and target:GetFullName() or "nil"
            })
        end
    end)
    
    -- Touch Began (Tap Start)
    self.Connections.InputBegan = UserInputService.InputBegan:Connect(function(input, gameProcessed)
        if input.UserInputType == Enum.UserInputType.Touch then
            local pos = GetTouchPosition(input)
            local screenPercent = GetScreenPercentage(pos)
            local target, worldPos = GetObjectAtPosition(pos)
            
            self.LastTouchPosition = pos
            self.TouchStartTime = tick()
            
            self:RecordAction("TouchBegan", {
                ScreenPosition = pos,
                ScreenPercent = screenPercent,
                WorldPosition = worldPos,
                Target = target,
                TargetName = target and target.Name or "nil",
                TargetPath = target and target:GetFullName() or "nil"
            })
        end
    end)
    
    -- Touch Ended (Tap End)
    self.Connections.InputEnded = UserInputService.InputEnded:Connect(function(input, gameProcessed)
        if input.UserInputType == Enum.UserInputType.Touch then
            local duration = tick() - self.TouchStartTime
            
            self:RecordAction("TouchEnded", {
                Duration = duration
            })
        end
    end)
    
    -- Tool Activation
    local function setupToolListener(tool)
        if tool:IsA("Tool") then
            self.Connections["Tool_" .. tool.Name] = tool.Activated:Connect(function()
                self:RecordAction("ToolActivate", {
                    ToolName = tool.Name
                })
            end)
        end
    end
    
    for _, tool in pairs(character:GetChildren()) do
        setupToolListener(tool)
    end
    
    self.Connections.ChildAdded = character.ChildAdded:Connect(setupToolListener)
    
    -- GUI Button Detection (Mobile UI)
    local function checkGuiButtons(gui)
        if gui:IsA("TextButton") or gui:IsA("ImageButton") then
            self.Connections["GUI_" .. gui:GetFullName()] = gui.MouseButton1Click:Connect(function()
                self:RecordAction("GuiButtonClick", {
                    ButtonName = gui.Name,
                    ButtonPath = gui:GetFullName(),
                    ButtonText = gui:IsA("TextButton") and gui.Text or ""
                })
            end)
        end
    end
    
    -- Check PlayerGui buttons
    local playerGui = player:WaitForChild("PlayerGui")
    for _, gui in pairs(playerGui:GetDescendants()) do
        checkGuiButtons(gui)
    end
    
    self.Connections.GuiDescendantAdded = playerGui.DescendantAdded:Connect(checkGuiButtons)
    
    -- Movement Recording (optimized for mobile)
    local lastPos = character:FindFirstChild("HumanoidRootPart") and character.HumanoidRootPart.Position or Vector3.new(0,0,0)
    local lastRecordTime = tick()
    
    self.Connections.Movement = RunService.Heartbeat:Connect(function()
        if self.IsRecording and character:FindFirstChild("HumanoidRootPart") then
            local currentPos = character.HumanoidRootPart.Position
            local timeSinceLastRecord = tick() - lastRecordTime
            
            -- Record movement every 1 second OR if moved more than 5 studs
            if (currentPos - lastPos).Magnitude > 5 or timeSinceLastRecord > 1 then
                self:RecordAction("Movement", {
                    Position = currentPos,
                    CFrame = character.HumanoidRootPart.CFrame
                })
                lastPos = currentPos
                lastRecordTime = tick()
            end
        end
    end)
    
    -- Wait/Delay Detection (auto-insert delays)
    local lastActionTime = tick()
    self.Connections.DelayDetector = RunService.Heartbeat:Connect(function()
        if self.IsRecording then
            local currentTime = tick()
            local timeSinceLastAction = currentTime - lastActionTime
            
            -- If no action for 2+ seconds, record a wait
            if timeSinceLastAction > 2 and #self.Actions > 0 then
                local lastAction = self.Actions[#self.Actions]
                if lastAction.Type ~= "Wait" then
                    self:RecordAction("Wait", {
                        Duration = timeSinceLastAction
                    })
                end
            end
            
            if #self.Actions > 0 and self.Actions[#self.Actions].Time > lastActionTime - self.StartTime then
                lastActionTime = currentTime
            end
        end
    end)
end

function Recorder:DisconnectListeners()
    for name, connection in pairs(self.Connections) do
        if connection and connection.Disconnect then
            pcall(function() connection:Disconnect() end)
        end
    end
    self.Connections = {}
end

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- PLAYBACK FUNCTIONS (Mobile)
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function Recorder:PlayRecording(actions, loopMode, loopCount, speed)
    if self.IsPlaying then
        print("âš ï¸ Already playing!")
        return
    end
    
    if not actions or #actions == 0 then
        print("âš ï¸ No actions to play!")
        return
    end
    
    self.IsPlaying = true
    self.IsPaused = false
    self.PlaySpeed = speed or 1
    self.LoopMode = loopMode or false
    self.MaxLoops = loopCount or 999999
    self.LoopCount = 0
    
    spawn(function()
        print("â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•")
        print("â–¶ï¸ PLAYBACK STARTED (Mobile)")
        print("â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•")
        print("Speed:", self.PlaySpeed .. "x")
        print("Loop:", self.LoopMode and "YES" or "NO")
        print("â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•")
        
        repeat
            self.LoopCount = self.LoopCount + 1
            
            if UpdateLoopCount then
                UpdateLoopCount(self.LoopCount)
            end
            
            print(string.format("ğŸ”„ Loop %d/%s", self.LoopCount, self.LoopMode and tostring(self.MaxLoops) or "1"))
            
            for i, action in ipairs(actions) do
                if not self.IsPlaying then break end
                
                while self.IsPaused and self.IsPlaying do
                    wait(0.1)
                end
                
                if i > 1 then
                    local delay = (action.Time - actions[i-1].Time) / self.PlaySpeed
                    wait(math.max(0.05, delay))
                end
                
                self:ExecuteMobileAction(action, i)
            end
            
            if not self.LoopMode or self.LoopCount >= self.MaxLoops then
                break
            end
            
            wait(0.5)
            
        until not self.IsPlaying
        
        self.IsPlaying = false
        self.IsPaused = false
        
        print("â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•")
        print("â¹ï¸ PLAYBACK STOPPED")
        print("â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•")
        
        if UpdatePlaybackStatus then
            UpdatePlaybackStatus("Stopped")
        end
    end)
end

function Recorder:ExecuteMobileAction(action, index)
    local success, err = pcall(function()
        
        if action.Type == "TouchTap" or action.Type == "TouchBegan" then
            -- Method 1: Try to click target object
            if action.Data.Target and action.Data.Target.Parent then
                local target = action.Data.Target
                
                -- Check for ClickDetector
                local clickDetector = target:FindFirstChildOfClass("ClickDetector")
                if clickDetector and fireclickdetector then
                    fireclickdetector(clickDetector)
                    print(string.format("âœ… [%d] Clicked: %s", index, target.Name))
                    return
                end
            end
            
            -- Method 2: Try to find by path
            if action.Data.TargetPath and action.Data.TargetPath ~= "nil" then
                local found = game
                for part in string.gmatch(action.Data.TargetPath, "[^.]+") do
                    if found then
                        found = found:FindFirstChild(part)
                    end
                end
                
                if found then
                    local cd = found:FindFirstChildOfClass("ClickDetector")
                    if cd and fireclickdetector then
                        fireclickdetector(cd)
                        print(string.format("âœ… [%d] Clicked: %s", index, action.Data.TargetName))
                        return
                    end
                    
                    -- Check for ProximityPrompt
                    local pp = found:FindFirstChildOfClass("ProximityPrompt")
                    if pp and fireproximityprompt then
                        fireproximityprompt(pp)
                        print(string.format("âœ… [%d] Prompted: %s", index, action.Data.TargetName))
                        return
                    end
                end
            end
            
            -- Method 3: Virtual touch at position
            if action.Data.ScreenPosition then
                local pos = GetPositionFromPercentage(action.Data.ScreenPercent)
                
                -- Use VirtualUser to simulate tap
                VirtualUser:CaptureController()
                VirtualUser:ClickButton1(Vector2.new(pos.X, pos.Y))
                
                print(string.format("âœ… [%d] Virtual Tap at %.0f, %.0f", index, pos.X, pos.Y))
            end
            
        elseif action.Type == "ToolActivate" then
            local tool = character:FindFirstChild(action.Data.ToolName)
            if not tool then
                tool = character:FindFirstChildOfClass("Tool")
            end
            
            if tool and tool:IsA("Tool") then
                tool:Activate()
                print(string.format("âœ… [%d] Tool: %s", index, action.Data.ToolName))
            end
            
        elseif action.Type == "GuiButtonClick" then
            local found = game
            for part in string.gmatch(action.Data.ButtonPath, "[^.]+") do
                if found then
                    found = found:FindFirstChild(part)
                end
            end
            
            if found and (found:IsA("TextButton") or found:IsA("ImageButton")) then
                -- Simulate button click
                for _, connection in pairs(getconnections(found.MouseButton1Click)) do
                    connection:Fire()
                end
                print(string.format("âœ… [%d] GUI: %s", index, action.Data.ButtonName))
            end
            
        elseif action.Type == "Movement" then
            if character:FindFirstChild("HumanoidRootPart") then
                character.HumanoidRootPart.CFrame = action.Data.CFrame
                print(string.format("âœ… [%d] Moved", index))
            end
            
        elseif action.Type == "Wait" then
            local waitTime = action.Data.Duration / self.PlaySpeed
            wait(waitTime)
            print(string.format("â³ [%d] Waited %.2fs", index, waitTime))
        end
        
    end)
    
    if not success then
        print(string.format("âŒ [%d] Error: %s", index, tostring(err)))
    end
end

function Recorder:PausePlayback()
    if self.IsPlaying and not self.IsPaused then
        self.IsPaused = true
        print("â¸ï¸ Paused")
    end
end

function Recorder:ResumePlayback()
    if self.IsPlaying and self.IsPaused then
        self.IsPaused = false
        print("â–¶ï¸ Resumed")
    end
end

function Recorder:StopPlayback()
    self.IsPlaying = false
    self.IsPaused = false
    print("â¹ï¸ Stopped")
end

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- SAVE/LOAD (Same as PC version)
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function Recorder:SaveRecording(name)
    if not name or name == "" then
        name = "Recording_" .. os.date("%H%M%S")
    end
    
    self.SavedRecordings[name] = {
        Actions = self.Actions,
        Duration = #self.Actions > 0 and self.Actions[#self.Actions].Time or 0,
        ActionCount = #self.Actions,
        SavedAt = os.date("%Y-%m-%d %H:%M:%S"),
        Platform = "Android_Delta"
    }
    
    self.Stats.TotalRecordings = self.Stats.TotalRecordings + 1
    print("ğŸ’¾ Saved:", name)
    return name
end

function Recorder:LoadRecording(name)
    if self.SavedRecordings[name] then
        self.CurrentRecording = self.SavedRecordings[name]
        print("ğŸ“‚ Loaded:", name)
        return self.CurrentRecording.Actions
    end
    return nil
end

function Recorder:DeleteRecording(name)
    if self.SavedRecordings[name] then
        self.SavedRecordings[name] = nil
        print("ğŸ—‘ï¸ Deleted:", name)
        return true
    end
    return false
end

function Recorder:GetRecordingList()
    local list = {}
    for name, data in pairs(self.SavedRecordings) do
        table.insert(list, {
            Name = name,
            Duration = data.Duration,
            Actions = data.ActionCount,
            Date = data.SavedAt
        })
    end
    return list
end

function Recorder:ExportRecording(name)
    local recording = self.SavedRecordings[name]
    if recording then
        local exported = HttpService:JSONEncode(recording)
        setclipboard(exported)
        print("ğŸ“‹ Exported:", name)
        return true
    end
    return false
end

function Recorder:ImportRecording(json, name)
    local success = pcall(function()
        local imported = HttpService:JSONDecode(json)
        if not name or name == "" then
            name = "Imported_" .. os.date("%H%M%S")
        end
        self.SavedRecordings[name] = imported
        print("ğŸ“¥ Imported:", name)
    end)
    return success
end

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- CREATE GUI (Mobile Optimized)
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

local Parent = CoreGui
if not pcall(function() return CoreGui.Name end) then
    Parent = player:WaitForChild("PlayerGui")
end

for _, gui in pairs(Parent:GetChildren()) do
    if gui.Name == "ActionRecorder" then
        gui:Destroy()
    end
end

local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "ActionRecorder"
ScreenGui.ResetOnSpawn = false
ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
ScreenGui.Parent = Parent

-- Shadow Frame (untuk efek bayangan)
local Shadow = Instance.new("Frame")
Shadow.Name = "Shadow"
Shadow.Size = UDim2.new(0, 390, 0, 530)
Shadow.Position = UDim2.new(0.5, -195, 0.5, -265)
Shadow.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
Shadow.BackgroundTransparency = 0.8
Shadow.BorderSizePixel = 0
Shadow.ZIndex = 0
Shadow.Parent = ScreenGui

local ShadowCorner = Instance.new("UICorner")
ShadowCorner.CornerRadius = UDim.new(0, 15)
ShadowCorner.Parent = Shadow

-- Main Frame (Mobile sized) with custom drag
local Main = Instance.new("Frame")
Main.Name = "Main"
Main.Size = UDim2.new(0, 0, 0, 0) -- Start minimized for animation
Main.Position = UDim2.new(0.5, -190, 0.5, -260)
Main.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
Main.BackgroundTransparency = 0
Main.BorderSizePixel = 0
Main.Active = true
Main.ZIndex = 1
Main.Parent = ScreenGui

local MainCorner = Instance.new("UICorner")
MainCorner.CornerRadius = UDim.new(0, 12)
MainCorner.Parent = Main

-- Entrance Animation
wait(0.1)
TweenService:Create(Main, TweenInfo.new(0.4, Enum.EasingStyle.Back, Enum.EasingDirection.Out), {
    Size = UDim2.new(0, 380, 0, 520)
}):Play()

-- Don't animate shadow transparency - keep it solid
-- Shadow stays at 0.8 transparency

-- Custom Drag System
local dragging = false
local dragInput
local dragStart
local startPos
local startShadowPos

local function update(input)
    local delta = input.Position - dragStart
    local newPosition = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
    local newShadowPos = UDim2.new(startShadowPos.X.Scale, startShadowPos.X.Offset + delta.X, startShadowPos.Y.Scale, startShadowPos.Y.Offset + delta.Y)
    
    -- Smooth animation for both main and shadow
    TweenService:Create(Main, TweenInfo.new(0.1), {Position = newPosition}):Play()
    TweenService:Create(Shadow, TweenInfo.new(0.1), {Position = newShadowPos}):Play()
end

Main.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
        dragging = true
        dragStart = input.Position
        startPos = Main.Position
        startShadowPos = Shadow.Position
        
        -- Visual feedback when dragging starts
        TweenService:Create(Main, TweenInfo.new(0.1), {
            BackgroundColor3 = Color3.fromRGB(35, 35, 35)
        }):Play()
        
        input.Changed:Connect(function()
            if input.UserInputState == Enum.UserInputState.End then
                dragging = false
                
                -- Reset color when drag ends
                TweenService:Create(Main, TweenInfo.new(0.2), {
                    BackgroundColor3 = Color3.fromRGB(25, 25, 25)
                }):Play()
            end
        end)
    end
end)

Main.InputChanged:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
        dragInput = input
    end
end)

UserInputService.InputChanged:Connect(function(input)
    if input == dragInput and dragging then
        update(input)
    end
end)

-- Title Bar
local TitleBar = Instance.new("Frame")
TitleBar.Size = UDim2.new(1, 0, 0, 35)
TitleBar.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
TitleBar.BackgroundTransparency = 0
TitleBar.BorderSizePixel = 0
TitleBar.ZIndex = 2
TitleBar.Parent = Main

local TitleCorner = Instance.new("UICorner")
TitleCorner.CornerRadius = UDim.new(0, 12)
TitleCorner.Parent = TitleBar

local Title = Instance.new("TextLabel")
Title.Size = UDim2.new(1, -105, 1, 0)
Title.Position = UDim2.new(0, 8, 0, 0)
Title.BackgroundTransparency = 1
Title.Text = "âºï¸ RECORDER (Android)"
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.TextSize = 14
Title.Font = Enum.Font.GothamBold
Title.TextXAlignment = Enum.TextXAlignment.Left
Title.ZIndex = 3
Title.Parent = TitleBar

-- Close Button
local CloseBtn = Instance.new("TextButton")
CloseBtn.Size = UDim2.new(0, 28, 0, 28)
CloseBtn.Position = UDim2.new(1, -32, 0, 3.5)
CloseBtn.BackgroundColor3 = Color3.fromRGB(220, 50, 50)
CloseBtn.BackgroundTransparency = 0
CloseBtn.Text = "âœ•"
CloseBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
CloseBtn.TextSize = 16
CloseBtn.Font = Enum.Font.GothamBold
CloseBtn.BorderSizePixel = 0
CloseBtn.ZIndex = 3
CloseBtn.Parent = TitleBar

local CloseCorner = Instance.new("UICorner")
CloseCorner.CornerRadius = UDim.new(0, 8)
CloseCorner.Parent = CloseBtn

CloseBtn.MouseButton1Click:Connect(function()
    Recorder:StopPlayback()
    Recorder:StopRecording()
    
    -- Fade out animation
    TweenService:Create(Main, TweenInfo.new(0.3), {
        Size = UDim2.new(0, 0, 0, 0),
        BackgroundTransparency = 1
    }):Play()
    
    wait(0.3)
    ScreenGui:Destroy()
end)

-- Hover effect for Close button
CloseBtn.MouseEnter:Connect(function()
    TweenService:Create(CloseBtn, TweenInfo.new(0.2), {
        BackgroundColor3 = Color3.fromRGB(255, 60, 60)
    }):Play()
end)

CloseBtn.MouseLeave:Connect(function()
    TweenService:Create(CloseBtn, TweenInfo.new(0.2), {
        BackgroundColor3 = Color3.fromRGB(220, 50, 50)
    }):Play()
end)

-- Minimize Button
local MinBtn = Instance.new("TextButton")
MinBtn.Size = UDim2.new(0, 28, 0, 28)
MinBtn.Position = UDim2.new(1, -64, 0, 3.5)
MinBtn.BackgroundColor3 = Color3.fromRGB(220, 180, 50)
MinBtn.BackgroundTransparency = 0
MinBtn.Text = "âˆ’"
MinBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
MinBtn.TextSize = 20
MinBtn.Font = Enum.Font.GothamBold
MinBtn.BorderSizePixel = 0
MinBtn.ZIndex = 3
MinBtn.Parent = TitleBar

local MinCorner = Instance.new("UICorner")
MinCorner.CornerRadius = UDim.new(0, 8)
MinCorner.Parent = MinBtn

local isMinimized = false
local savedSize = UDim2.new(0, 380, 0, 520)

MinBtn.MouseButton1Click:Connect(function()
    if isMinimized then
        -- Restore
        TweenService:Create(Main, TweenInfo.new(0.2), {
            Size = savedSize
        }):Play()
        MinBtn.Text = "âˆ’"
        isMinimized = false
    else
        -- Minimize
        savedSize = Main.Size
        TweenService:Create(Main, TweenInfo.new(0.2), {
            Size = UDim2.new(0, Main.Size.X.Offset, 0, 35)
        }):Play()
        MinBtn.Text = "â–¡"
        isMinimized = true
    end
end)

-- Hover effect for Minimize button
MinBtn.MouseEnter:Connect(function()
    TweenService:Create(MinBtn, TweenInfo.new(0.2), {
        BackgroundColor3 = Color3.fromRGB(255, 200, 60)
    }):Play()
end)

MinBtn.MouseLeave:Connect(function()
    TweenService:Create(MinBtn, TweenInfo.new(0.2), {
        BackgroundColor3 = Color3.fromRGB(220, 180, 50)
    }):Play()
end)

-- Resize Button
local ResizeBtn = Instance.new("TextButton")
ResizeBtn.Size = UDim2.new(0, 28, 0, 28)
ResizeBtn.Position = UDim2.new(1, -96, 0, 3.5)
ResizeBtn.BackgroundColor3 = Color3.fromRGB(80, 150, 220)
ResizeBtn.BackgroundTransparency = 0
ResizeBtn.Text = "âŠ"
ResizeBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
ResizeBtn.TextSize = 16
ResizeBtn.Font = Enum.Font.GothamBold
ResizeBtn.BorderSizePixel = 0
ResizeBtn.ZIndex = 3
ResizeBtn.Parent = TitleBar

local ResizeCorner = Instance.new("UICorner")
ResizeCorner.CornerRadius = UDim.new(0, 8)
ResizeCorner.Parent = ResizeBtn

-- Size presets for mobile
local sizePresets = {
    {width = 320, height = 450, name = "Small"},   -- Compact
    {width = 380, height = 520, name = "Medium"},  -- Default
    {width = 450, height = 600, name = "Large"}    -- Big
}
local currentSizeIndex = 2

ResizeBtn.MouseButton1Click:Connect(function()
    if isMinimized then return end
    
    currentSizeIndex = currentSizeIndex + 1
    if currentSizeIndex > 3 then currentSizeIndex = 1 end
    
    local preset = sizePresets[currentSizeIndex]
    local newSize = UDim2.new(0, preset.width, 0, preset.height)
    local newPos = UDim2.new(0.5, -preset.width/2, 0.5, -preset.height/2)
    local shadowSize = UDim2.new(0, preset.width + 10, 0, preset.height + 10)
    local shadowPos = UDim2.new(0.5, -(preset.width + 10)/2, 0.5, -(preset.height + 10)/2)
    
    -- Smooth resize animation for both
    TweenService:Create(Main, TweenInfo.new(0.25, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
        Size = newSize,
        Position = newPos
    }):Play()
    
    TweenService:Create(Shadow, TweenInfo.new(0.25, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
        Size = shadowSize,
        Position = shadowPos
    }):Play()
    
    -- Update button icon
    if currentSizeIndex == 1 then
        ResizeBtn.Text = "âŠ¡"  -- Small
    elseif currentSizeIndex == 2 then
        ResizeBtn.Text = "âŠ"  -- Medium
    else
        ResizeBtn.Text = "âŠ "  -- Large
    end
    
    -- Show size indicator
    local indicator = Instance.new("TextLabel")
    indicator.Size = UDim2.new(0, 100, 0, 30)
    indicator.Position = UDim2.new(0.5, -50, 0.5, -15)
    indicator.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
    indicator.BackgroundTransparency = 0.2
    indicator.Text = preset.name
    indicator.TextColor3 = Color3.fromRGB(255, 255, 255)
    indicator.TextSize = 14
    indicator.Font = Enum.Font.GothamBold
    indicator.ZIndex = 100
    indicator.Parent = Main
    
    local indicatorCorner = Instance.new("UICorner")
    indicatorCorner.CornerRadius = UDim.new(0, 8)
    indicatorCorner.Parent = indicator
    
    -- Fade out indicator
    wait(0.5)
    TweenService:Create(indicator, TweenInfo.new(0.3), {
        BackgroundTransparency = 1,
        TextTransparency = 1
    }):Play()
    
    wait(0.3)
    indicator:Destroy()
end)

-- Hover effect for Resize button
ResizeBtn.MouseEnter:Connect(function()
    TweenService:Create(ResizeBtn, TweenInfo.new(0.2), {
        BackgroundColor3 = Color3.fromRGB(100, 170, 240)
    }):Play()
end)

ResizeBtn.MouseLeave:Connect(function()
    TweenService:Create(ResizeBtn, TweenInfo.new(0.2), {
        BackgroundColor3 = Color3.fromRGB(80, 150, 220)
    }):Play()
end)

-- Drag Indicator
local DragIndicator = Instance.new("Frame")
DragIndicator.Size = UDim2.new(0, 40, 0, 4)
DragIndicator.Position = UDim2.new(0.5, -20, 0, 2)
DragIndicator.BackgroundColor3 = Color3.fromRGB(100, 100, 100)
DragIndicator.BackgroundTransparency = 0
DragIndicator.BorderSizePixel = 0
DragIndicator.ZIndex = 3
DragIndicator.Parent = TitleBar

local DragIndicatorCorner = Instance.new("UICorner")
DragIndicatorCorner.CornerRadius = UDim.new(1, 0)
DragIndicatorCorner.Parent = DragIndicator

-- Pulse animation for drag indicator
spawn(function()
    while wait(1.5) do
        if DragIndicator and DragIndicator.Parent then
            TweenService:Create(DragIndicator, TweenInfo.new(0.5, Enum.EasingStyle.Quad, Enum.EasingDirection.InOut), {
                BackgroundColor3 = Color3.fromRGB(150, 150, 150)
            }):Play()
            wait(0.5)
            TweenService:Create(DragIndicator, TweenInfo.new(0.5, Enum.EasingStyle.Quad, Enum.EasingDirection.InOut), {
                BackgroundColor3 = Color3.fromRGB(100, 100, 100)
            }):Play()
        else
            break
        end
    end
end)

-- Content Frame
local Content = Instance.new("ScrollingFrame")
Content.Size = UDim2.new(1, -8, 1, -42)
Content.Position = UDim2.new(0, 4, 0, 38)
Content.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
Content.BackgroundTransparency = 0
Content.BorderSizePixel = 0
Content.ScrollBarThickness = 5
Content.CanvasSize = UDim2.new(0, 0, 0, 0)
Content.ZIndex = 2
Content.Parent = Main

local ContentCorner = Instance.new("UICorner")
ContentCorner.CornerRadius = UDim.new(0, 10)
ContentCorner.Parent = Content

local Layout = Instance.new("UIListLayout")
Layout.Padding = UDim.new(0, 4)
Layout.SortOrder = Enum.SortOrder.LayoutOrder
Layout.Parent = Content

local Padding = Instance.new("UIPadding")
Padding.PaddingTop = UDim.new(0, 6)
Padding.PaddingBottom = UDim.new(0, 6)
Padding.PaddingLeft = UDim.new(0, 6)
Padding.PaddingRight = UDim.new(0, 6)
Padding.Parent = Content

Layout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
    Content.CanvasSize = UDim2.new(0, 0, 0, Layout.AbsoluteContentSize.Y + 12)
end)

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- UI HELPER FUNCTIONS (Mobile Optimized)
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

local function CreateSection(text)
    local section = Instance.new("Frame")
    section.Size = UDim2.new(1, 0, 0, 25)
    section.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
    section.BackgroundTransparency = 0
    section.BorderSizePixel = 0
    section.ZIndex = 3
    section.Parent = Content
    
    local corner = Instance.new("UICorner")
    corner.CornerRadius = UDim.new(0, 6)
    corner.Parent = section
    
    local label = Instance.new("TextLabel")
    label.Size = UDim2.new(1, -8, 1, 0)
    label.Position = UDim2.new(0, 8, 0, 0)
    label.BackgroundTransparency = 1
    label.Text = text
    label.TextColor3 = Color3.fromRGB(100, 180, 255)
    label.TextSize = 12
    label.Font = Enum.Font.GothamBold
    label.TextXAlignment = Enum.TextXAlignment.Left
    label.ZIndex = 4
    label.Parent = section
end

local function CreateButton(text, color, callback)
    local btn = Instance.new("TextButton")
    btn.Size = UDim2.new(1, 0, 0, 36)
    btn.BackgroundColor3 = color
    btn.BackgroundTransparency = 0
    btn.BorderSizePixel = 0
    btn.Text = text
    btn.TextColor3 = Color3.fromRGB(255, 255, 255)
    btn.TextSize = 12
    btn.Font = Enum.Font.GothamBold
    btn.ZIndex = 3
    btn.Parent = Content
    
    local corner = Instance.new("UICorner")
    corner.CornerRadius = UDim.new(0, 6)
    corner.Parent = btn
    
    btn.MouseButton1Click:Connect(function()
        spawn(callback)
    end)
    
    return btn
end

local function CreateLabel(text, height)
    local label = Instance.new("TextLabel")
    label.Size = UDim2.new(1, 0, 0, height or 30)
    label.BackgroundTransparency = 1
    label.Text = text
    label.TextColor3 = Color3.fromRGB(200, 200, 200)
    label.TextSize = 11
    label.Font = Enum.Font.Gotham
    label.TextWrapped = true
    label.TextXAlignment = Enum.TextXAlignment.Left
    label.TextYAlignment = Enum.TextYAlignment.Top
    label.ZIndex = 3
    label.Parent = Content
    return label
end

local function CreateTextBox(placeholder, callback)
    local box = Instance.new("TextBox")
    box.Size = UDim2.new(1, 0, 0, 32)
    box.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
    box.BackgroundTransparency = 0
    box.BorderSizePixel = 0
    box.PlaceholderText = placeholder
    box.Text = ""
    box.TextColor3 = Color3.fromRGB(255, 255, 255)
    box.PlaceholderColor3 = Color3.fromRGB(120, 120, 120)
    box.TextSize = 11
    box.Font = Enum.Font.Gotham
    box.ClearTextOnFocus = false
    box.ZIndex = 3
    box.Parent = Content
    
    local corner = Instance.new("UICorner")
    corner.CornerRadius = UDim.new(0, 6)
    corner.Parent = box
    
    local padding = Instance.new("UIPadding")
    padding.PaddingLeft = UDim.new(0, 6)
    padding.Parent = box
    
    if callback then
        box.FocusLost:Connect(function(enter)
            if enter and box.Text ~= "" then
                spawn(function() callback(box.Text) end)
            end
        end)
    end
    
    return box
end

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- BUILD MOBILE UI
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

CreateSection("ğŸ“Š STATUS")

local statusLabel = CreateLabel("ğŸ“± Mobile Mode Ready", 38)
local actionCountLabel = CreateLabel("Actions: 0 | Duration: 0.0s", 22)

function UpdateActionCount(count)
    local duration = tick() - Recorder.StartTime
    actionCountLabel.Text = string.format("Actions: %d | Time: %.1fs", count, duration)
end

function UpdatePlaybackStatus(status)
    if status == "Recording" then
        statusLabel.Text = "âºï¸ Recording...\nTap screen to record actions"
        statusLabel.TextColor3 = Color3.fromRGB(255, 100, 100)
    elseif status == "Playing" then
        statusLabel.Text = "â–¶ï¸ Playing recording..."
        statusLabel.TextColor3 = Color3.fromRGB(100, 255, 100)
    elseif status == "Paused" then
        statusLabel.Text = "â¸ï¸ Playback paused"
        statusLabel.TextColor3 = Color3.fromRGB(255, 200, 100)
    else
        statusLabel.Text = "ğŸ“± Mobile Mode Ready"
        statusLabel.TextColor3 = Color3.fromRGB(200, 200, 200)
    end
end

CreateSection("âºï¸ RECORDING")

local recordBtn = CreateButton("âºï¸ START", Color3.fromRGB(220, 60, 60), function()
    if Recorder.IsRecording then return end
    
    Recorder:StartRecording()
    UpdatePlaybackStatus("Recording")
    recordBtn.Text = "ğŸ”´ RECORDING..."
    recordBtn.BackgroundColor3 = Color3.fromRGB(180, 40, 40)
end)

CreateButton("â¹ï¸ STOP", Color3.fromRGB(100, 100, 100), function()
    if not Recorder.IsRecording then return end
    
    Recorder:StopRecording()
    UpdatePlaybackStatus("Stopped")
    recordBtn.Text = "âºï¸ START"
    recordBtn.BackgroundColor3 = Color3.fromRGB(220, 60, 60)
end)

CreateSection("â–¶ï¸ PLAYBACK")

local loopCountLabel = CreateLabel("Loop: 0", 22)

function UpdateLoopCount(count)
    loopCountLabel.Text = string.format("Loop: %d | Speed: %.1fx", count, Recorder.PlaySpeed)
end

CreateButton("â–¶ï¸ PLAY ONCE", Color3.fromRGB(60, 180, 60), function()
    if #Recorder.Actions == 0 then return end
    Recorder:PlayRecording(Recorder.Actions, false, 1, Recorder.PlaySpeed)
    UpdatePlaybackStatus("Playing")
end)

CreateButton("ğŸ” LOOP", Color3.fromRGB(100, 150, 200), function()
    if #Recorder.Actions == 0 then return end
    Recorder:PlayRecording(Recorder.Actions, true, 999999, Recorder.PlaySpeed)
    UpdatePlaybackStatus("Playing")
end)

CreateButton("â¸ï¸ PAUSE", Color3.fromRGB(200, 150, 50), function()
    if Recorder.IsPlaying and not Recorder.IsPaused then
        Recorder:PausePlayback()
        UpdatePlaybackStatus("Paused")
    elseif Recorder.IsPaused then
        Recorder:ResumePlayback()
        UpdatePlaybackStatus("Playing")
    end
end)

CreateButton("â¹ï¸ STOP", Color3.fromRGB(150, 50, 50), function()
    Recorder:StopPlayback()
    UpdatePlaybackStatus("Stopped")
    loopCountLabel.Text = "Loop: 0"
end)

CreateSection("âš™ï¸ SPEED")

local speedSlider = CreateTextBox("Speed (0.5 - 5.0)")
speedSlider.Text = "1.0"
speedSlider.FocusLost:Connect(function()
    local speed = tonumber(speedSlider.Text)
    if speed and speed >= 0.1 and speed <= 10 then
        Recorder.PlaySpeed = speed
    else
        speedSlider.Text = tostring(Recorder.PlaySpeed)
    end
end)

CreateSection("ğŸ’¾ SAVE/LOAD")

local saveNameBox = CreateTextBox("Recording name")

CreateButton("ğŸ’¾ SAVE", Color3.fromRGB(70, 130, 180), function()
    if #Recorder.Actions == 0 then return end
    Recorder:SaveRecording(saveNameBox.Text)
    saveNameBox.Text = ""
end)

CreateLabel("Saved Recordings:", 22)

local recordingsList = Instance.new("ScrollingFrame")
recordingsList.Size = UDim2.new(1, 0, 0, 120)
recordingsList.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
recordingsList.BorderSizePixel = 0
recordingsList.ScrollBarThickness = 4
recordingsList.CanvasSize = UDim2.new(0, 0, 0, 0)
recordingsList.Parent = Content

local recCorner = Instance.new("UICorner")
recCorner.CornerRadius = UDim.new(0, 6)
recCorner.Parent = recordingsList

local recLayout = Instance.new("UIListLayout")
recLayout.Padding = UDim.new(0, 2)
recLayout.Parent = recordingsList

recLayout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
    recordingsList.CanvasSize = UDim2.new(0, 0, 0, recLayout.AbsoluteContentSize.Y + 4)
end)

local function RefreshRecordingsList()
    for _, child in pairs(recordingsList:GetChildren()) do
        if child:IsA("Frame") then
            child:Destroy()
        end
    end
    
    local list = Recorder:GetRecordingList()
    
    if #list == 0 then
        local empty = Instance.new("TextLabel")
        empty.Size = UDim2.new(1, -4, 1, 0)
        empty.BackgroundTransparency = 1
        empty.Text = "No recordings"
        empty.TextColor3 = Color3.fromRGB(150, 150, 150)
        empty.TextSize = 10
        empty.Font = Enum.Font.Gotham
        empty.Parent = recordingsList
        return
    end
    
    for _, rec in ipairs(list) do
        local item = Instance.new("Frame")
        item.Size = UDim2.new(1, -4, 0, 50)
        item.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
        item.BorderSizePixel = 0
        item.Parent = recordingsList
        
        local itemCorner = Instance.new("UICorner")
        itemCorner.CornerRadius = UDim.new(0, 4)
        itemCorner.Parent = item
        
        local nameLabel = Instance.new("TextLabel")
        nameLabel.Size = UDim2.new(1, -85, 0, 14)
        nameLabel.Position = UDim2.new(0, 4, 0, 2)
        nameLabel.BackgroundTransparency = 1
        nameLabel.Text = rec.Name
        nameLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
        nameLabel.TextSize = 10
        nameLabel.Font = Enum.Font.GothamBold
        nameLabel.TextXAlignment = Enum.TextXAlignment.Left
        nameLabel.TextTruncate = Enum.TextTruncate.AtEnd
        nameLabel.Parent = item
        
        local infoLabel = Instance.new("TextLabel")
        infoLabel.Size = UDim2.new(1, -85, 0, 11)
        infoLabel.Position = UDim2.new(0, 4, 0, 16)
        infoLabel.BackgroundTransparency = 1
        infoLabel.Text = string.format("%d actions | %.1fs", rec.Actions, rec.Duration)
        infoLabel.TextColor3 = Color3.fromRGB(150, 150, 150)
        infoLabel.TextSize = 8
        infoLabel.Font = Enum.Font.Gotham
        infoLabel.TextXAlignment = Enum.TextXAlignment.Left
        infoLabel.Parent = item
        
        local dateLabel = Instance.new("TextLabel")
        dateLabel.Size = UDim2.new(1, -85, 0, 10)
        dateLabel.Position = UDim2.new(0, 4, 0, 27)
        dateLabel.BackgroundTransparency = 1
        dateLabel.Text = rec.Date
        dateLabel.TextColor3 = Color3.fromRGB(120, 120, 120)
        dateLabel.TextSize = 7
        dateLabel.Font = Enum.Font.Gotham
        dateLabel.TextXAlignment = Enum.TextXAlignment.Left
        dateLabel.Parent = item
        
        local loadBtn = Instance.new("TextButton")
        loadBtn.Size = UDim2.new(0, 38, 0, 15)
        loadBtn.Position = UDim2.new(1, -42, 0, 2)
        loadBtn.BackgroundColor3 = Color3.fromRGB(60, 150, 60)
        loadBtn.Text = "ğŸ“‚"
        loadBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
        loadBtn.TextSize = 10
        loadBtn.Font = Enum.Font.GothamBold
        loadBtn.BorderSizePixel = 0
        loadBtn.Parent = item
        
        local loadCorner = Instance.new("UICorner")
        loadCorner.CornerRadius = UDim.new(0, 3)
        loadCorner.Parent = loadBtn
        
        loadBtn.MouseButton1Click:Connect(function()
            Recorder:LoadRecording(rec.Name)
        end)
        
        local delBtn = Instance.new("TextButton")
        delBtn.Size = UDim2.new(0, 38, 0, 15)
        delBtn.Position = UDim2.new(1, -42, 0, 19)
        delBtn.BackgroundColor3 = Color3.fromRGB(200, 60, 60)
        delBtn.Text = "ğŸ—‘ï¸"
        delBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
        delBtn.TextSize = 10
        delBtn.Font = Enum.Font.GothamBold
        delBtn.BorderSizePixel = 0
        delBtn.Parent = item
        
        local delCorner = Instance.new("UICorner")
        delCorner.CornerRadius = UDim.new(0, 3)
        delCorner.Parent = delBtn
        
        delBtn.MouseButton1Click:Connect(function()
            if Recorder:DeleteRecording(rec.Name) then
                RefreshRecordingsList()
            end
        end)
        
        local expBtn = Instance.new("TextButton")
        expBtn.Size = UDim2.new(0, 38, 0, 13)
        expBtn.Position = UDim2.new(1, -42, 0, 36)
        expBtn.BackgroundColor3 = Color3.fromRGB(100, 120, 180)
        expBtn.Text = "ğŸ“‹"
        expBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
        expBtn.TextSize = 9
        expBtn.Font = Enum.Font.GothamBold
        expBtn.BorderSizePixel = 0
        expBtn.Parent = item
        
        local expCorner = Instance.new("UICorner")
        expCorner.CornerRadius = UDim.new(0, 3)
        expCorner.Parent = expBtn
        
        expBtn.MouseButton1Click:Connect(function()
            Recorder:ExportRecording(rec.Name)
        end)
    end
end

CreateButton("ğŸ”„ REFRESH", Color3.fromRGB(80, 80, 80), function()
    RefreshRecordingsList()
end)

CreateSection("â„¹ï¸ INFO")

CreateLabel([[
ğŸ“± MOBILE RECORDER (Delta)

1ï¸âƒ£ START recording
2ï¸âƒ£ Tap screen to record
3ï¸âƒ£ STOP recording
4ï¸âƒ£ PLAY or LOOP

âœ… Records:
â€¢ Screen taps
â€¢ Tool usage
â€¢ GUI buttons
â€¢ Movement
â€¢ Delays

ğŸ’¡ Works on all games!
Perfect for AFK farming!
]], 160)

RefreshRecordingsList()

print("â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•")
print("âœ… MOBILE RECORDER READY!")
print("â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•")
print("Platform: Android (Delta)")
print("Touch detection: Active")
print("Ready to record!")
print("â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•")

Main.Visible = true
